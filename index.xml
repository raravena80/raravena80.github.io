<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title/><link>https://serverbooter.com/</link><description>Recent content on</description><generator>Hugo</generator><language>en-us</language><managingEditor>raravena80@gmail.com (Ricardo Aravena)</managingEditor><webMaster>raravena80@gmail.com (Ricardo Aravena)</webMaster><lastBuildDate>Thu, 14 Aug 2025 09:50:14 -1000</lastBuildDate><atom:link href="https://serverbooter.com/index.xml" rel="self" type="application/rss+xml"/><item><title>From Ideas to Impact: Cloud Native AI and TOC Highlights Post-KubeCon EU 2025</title><link>https://serverbooter.com/post/cncf-cloud-native-ai-and-toc-highlights-post-kubecon-eu-2-25/</link><pubDate>Sat, 19 Apr 2025 14:17:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/cncf-cloud-native-ai-and-toc-highlights-post-kubecon-eu-2-25/</guid><description>&lt;h2 id="from-ideas-to-impact-cloud-native-ai-and-toc-highlights-post-kubecon-eu-2025">&lt;strong>From Ideas to Impact: Cloud Native AI and TOC Highlights Post-KubeCon EU 2025&lt;/strong>&lt;/h2>
&lt;p>When &lt;a href="https://www.serverbooter.com/post/cncf-cloud-native-ai-working-group-innovation-from-edge-to-core/">we previewed&lt;/a> the CNCF Cloud Native AI Working Group&amp;rsquo;s efforts ahead of KubeCon EU 2025, the tone was of curiosity and anticipation. Some still viewed AI as an outlier in the cloud-native world. But if KubeCon EU proved anything, AI has now fully arrived—and the community is building it &lt;em>in a cloud native way&lt;/em>.&lt;/p>
&lt;p>This year&amp;rsquo;s event didn&amp;rsquo;t just validate the momentum around AI; it showcased a CNCF community that&amp;rsquo;s actively rethinking its foundations—from how Technical Advisory Groups (TAGs) work to how the community serves end users to how projects grow and graduate. The CNCF Technical Oversight Committee (TOC) had a visible and influential role throughout the week, laying down a clear marker: the next wave of cloud native isn&amp;rsquo;t just about orchestration—it&amp;rsquo;s about intelligence, usability, and sustainable growth.&lt;/p></description></item><item><title>CNCF Cloud Native AI Working Group: Innovation from Edge to Core!</title><link>https://serverbooter.com/post/cncf-cloud-native-ai-working-group-innovation-from-edge-to-core/</link><pubDate>Thu, 27 Mar 2025 14:17:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/cncf-cloud-native-ai-working-group-innovation-from-edge-to-core/</guid><description>&lt;p>Over the past six months, the Cloud Native Computing Foundation&amp;rsquo;s (CNCF) &lt;a href="https://docs.google.com/document/d/1tS6gL5qjGLaHDtAChssqJhBVm8BIpopUA3Ddzm9LHwg/edit?tab=t.0#heading=h.tprh9feizr4r">Cloud Native AI (CNAI) Working Group&lt;/a> has been at the forefront of integrating artificial intelligence (AI) and machine learning (ML) with cloud-native technologies. This is a moment to discuss the working group&amp;rsquo;s initiatives and opportunities for contributors and enthusiasts as we prepare for KubeCon Europe 2025 in London.&lt;/p>
&lt;p>The group has been making strides in galvanizing the community around the needs of AI/ML workloads on top of cloud native environments. A significant deliverable was the publication of the &amp;ldquo;Cloud Native AI&amp;rdquo; whitepaper in March 2024.&lt;/p></description></item><item><title>Fun Times at The Kubernetes Forum Seoul and Sydney 2019</title><link>https://serverbooter.com/post/kubernetes-forum-seoul-sydney/</link><pubDate>Wed, 18 Dec 2019 14:17:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/kubernetes-forum-seoul-sydney/</guid><description>&lt;p>Hello everyone! I&amp;rsquo;m excited to write this post about my experience at the Kubernetes Forum Seoul and Sydney 2019. My journey started in San Francisco on Friday evening, December 6th, 2019, on a flight to Seoul.&lt;/p>
&lt;p>&lt;img src="https://user-images.githubusercontent.com/7659560/71111562-8f2e6600-217e-11ea-82b8-b5b0bad78d14.jpg" alt="SFO-ICN">&lt;/p>
&lt;p>&lt;img src="https://user-images.githubusercontent.com/7659560/71111890-3b704c80-217f-11ea-89b3-2214675f29c3.jpg" alt="SFO-ICN-Map">&lt;/p>
&lt;p>I arrived in Seoul on Sunday, December 8th, in the morning and had plenty of time during the day to rest in the hotel at the venue, &lt;a href="https://www.seouldragoncity.com/">The Seoul Dragon City&lt;/a>. As speakers, we were invited along with the organizers and community leaders to an event dinner in the &lt;a href="https://sdc-club.com/en/convention/room-goguryeo.php">Goguryeo room&lt;/a>. During that time, we had a great start networking with fellow industry leaders with an opportunity to connect. In my opinion, the number of people was just right to talk to most of the guests at dinner.&lt;/p></description></item><item><title>Speaking</title><link>https://serverbooter.com/page/speaking/</link><pubDate>Sat, 30 Nov 2019 14:17:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/page/speaking/</guid><description>&lt;p>This is a list of the talks I&amp;rsquo;ve given 2018-2024&lt;/p>
&lt;p>&lt;strong>What&amp;rsquo;s Up With All The Different Container Runtimes?&lt;/strong>
KubeCon/CloudNativeCon EU Copenhagen Denmark 2018
&lt;a href="https://youtu.be/lHv0LVEIPk8">Video&lt;/a>
&lt;a href="https://sched.co/Dqtw">Link&lt;/a>
&lt;a href="https://static.sched.com/hosted_files/kccnceu18/08/What%E2%80%99s%20Up%20With%20All%20the%20Container%20Runtimes.pdf">Slides&lt;/a>&lt;/p>
&lt;p>&lt;strong>Spice Up Your Workloads with Kata Containers&lt;/strong>
Open Source Summit NA Vancouver Canada 2018
&lt;a href="https://sched.co/FAP8">Link&lt;/a>
&lt;a href="https://static.sched.com/hosted_files/ossna18/56/Spice%20Up%20Your%20Workloads%20With%20Kata%20Containers.pdf">Slides&lt;/a>&lt;/p>
&lt;p>&lt;strong>Container Security &amp;amp; Multi-Tenancy Tales from Kata &amp;amp; Nabla&lt;/strong>
KubeCon/CloudNativeCon NA Seattle Washington 2018
&lt;a href="https://youtu.be/AgHMRJ16RAA">Video&lt;/a>
&lt;a href="https://sched.co/GrZH">Link&lt;/a>
&lt;a href="https://static.sched.com/hosted_files/kccna18/20/Container%20Security%20and%20Multi-Tenancy%20Tales%20from%20Kata%20and%20Nabla.pdf">Slides&lt;/a>&lt;/p>
&lt;p>&lt;strong>Kubernetes and The GitOps Face-Off&lt;/strong>
KubeCon/CloudNativeCon NA Seattle Washington 2018
&lt;a href="https://youtu.be/9qGqx_jdxQg">Video&lt;/a>
&lt;a href="https://sched.co/GrSe">Link&lt;/a>
&lt;a href="https://static.sched.com/hosted_files/kccna18/74/KubeCon-2018.pdf">Slides&lt;/a>&lt;/p>
&lt;p>&lt;strong>Enhancing Your Workload Security with Kata Containers&lt;/strong>
Container World Santa Clara California 2019
&lt;a href="https://tmt.knect365.com/container-world/speakers/ricardo-aravena#security_enhancing-your-workload-security-with-kata-containers">Link&lt;/a>
&lt;a href="https://docs.google.com/presentation/d/12yQFigHChzjXyRVflZsE8e4dC7Jy-cbudys5W7BLahU/edit?usp=sharing">Slides&lt;/a>&lt;/p></description></item><item><title>Speaking</title><link>https://serverbooter.com/post/speaking/</link><pubDate>Sat, 30 Nov 2019 14:17:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/speaking/</guid><description>&lt;p>&lt;a href="https://serverbooter.com/page/speaking/">This page has been moved&lt;/a>&lt;/p></description></item><item><title>Running Scylla in Kata Containers</title><link>https://serverbooter.com/post/scylla-in-kata-containers/</link><pubDate>Mon, 16 Apr 2018 14:17:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/scylla-in-kata-containers/</guid><description>&lt;p>The Kata community has been busy getting the first release out the door.&lt;/p>
&lt;p>Virtual Machines have been around in the industry for over 20 years. One of the most attractive features of Kata is that it runs containers in VMs and VMs are very stable and provide very good isolation of your compute resources hardware. Furthermore, virtualization systems like KVM, Xen and VMware provide multiple ways to attach to dedicated storage. VMware takes this step even further by providing things like Storage VMotion.&lt;/p></description></item><item><title>The Boom of Container Runtimes</title><link>https://serverbooter.com/post/container-runtimes-cncf/</link><pubDate>Sun, 04 Mar 2018 14:17:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/container-runtimes-cncf/</guid><description>&lt;p>It has been about 4 years since Docker exploded into the scene of Cloud Infrastructure.
With that came a shift in cloud applications from monolithic to microservices. Containers
made it easy for developers to deploy directly to production mostly caring about the scope of
her/his microservice.&lt;/p>
&lt;p>Enter container orchestration tools such as Kubernetes, Mesos, AWS ECS, GKE, Azure Container Service which
allow cloud operations to manage containers at scale. Setup these tools with a redundant masters as
quorum systems (k8s, mesos) and add hundreds of nodes or slaves and automatically scale your
containers up and down depending on demand.&lt;/p></description></item><item><title>Working At Branch</title><link>https://serverbooter.com/post/working-at-branch/</link><pubDate>Wed, 04 Oct 2017 14:17:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/working-at-branch/</guid><description>&lt;p>It has been about 4 months since I started working at &lt;a href="https://branch.io">Branch&lt;/a> and wanted
to reflect on what it&amp;rsquo;s been like.&lt;/p>
&lt;p>I can truly say that I&amp;rsquo;m enjoying everything about it. The environment is
fantastic, my co-workers are awesome, and we all come from various backgrounds.&lt;/p>
&lt;p>I like the fact that the company takes their values seriously and the founding team is
focused on making working at Branch the best experience you&amp;rsquo;ve ever had
in your career. There&amp;rsquo;s also a very strong focus on diversity as the
founding team puts it: The more diverse we are, the better we will
be positioned in the long run. Being more diverse allow us to bring in
different points of view and experiences that in the end help us
progress more efficiently. I can&amp;rsquo;t say that there are many places like that.&lt;/p></description></item><item><title>Kubernetes on GCP</title><link>https://serverbooter.com/post/kubernetes-on-gcp/</link><pubDate>Sat, 13 May 2017 16:28:29 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/kubernetes-on-gcp/</guid><description>&lt;p>Kubernetes has come a long way over the last 2 years and I was so excited to learn about during &lt;a href="https://serverbooter.com/post/cloudnativecon-kubecon-europe/">CloudNativeCon/Kubecon Berlin&lt;/a> this year.&lt;/p>
&lt;p>As of Today &lt;a href="https://github.com/kubernetes/kops">Kops&lt;/a> the standard tool for installing Kubernetes on AWS doesn&amp;rsquo;t support GCP yet (it&amp;rsquo;s in the works). However you can still setup your cluster using good old &lt;a href="https://github.com/kubernetes/kubernetes/blob/master/cluster/kube-up.sh">kube-up.sh&lt;/a>. There&amp;rsquo;s also a pretty good explanation on the &lt;a href="https://kubernetes.io/docs/getting-started-guides/gce/">k8s docs&lt;/a>. Make sure you install the &lt;a href="https://cloud.google.com/sdk/">Google Cloud SDK&lt;/a> with gcloud and all their utils.&lt;/p></description></item><item><title>DC/OS on GCP</title><link>https://serverbooter.com/post/dcos-on-gcp/</link><pubDate>Thu, 11 May 2017 16:28:29 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/dcos-on-gcp/</guid><description>&lt;p>DC/OS is the commercialized &lt;a href="http://mesos.apache.org/">Mesos&lt;/a> distribution + extras maintained by Mesosphere. I found it very straight forward to setup in GCP with the out of the box &lt;a href="https://github.com/raravena80/dcos-gce">Ansible scripts&lt;/a> provided by Mesosphere.&lt;/p>
&lt;p>For starters I followed everything described in the &lt;a href="https://github.com/raravena80/dcos-gce/blob/master/README.md">README&lt;/a>.&lt;/p>
&lt;p>Then, I had to modify the &lt;code>group_vars/all&lt;/code> file in the playbook&lt;/p>
&lt;pre tabindex="0">&lt;code>---
project: &amp;lt;my-gcp-project-id&amp;gt;
subnet: default
login_name: &amp;lt;my-gcp-login-id-with-no-email&amp;gt;
bootstrap_public_ip: 10.128.0.10 # This IP need to match the network in the zone
zone: us-central1-c

master_boot_disk_size: 200 # 200 is the recommended in GCP as of 05-2017
master_machine_type: n1-standard-1
master_boot_disk_type: pd-standard

agent_boot_disk_size: 200
agent_machine_type: n1-standard-1
agent_boot_disk_type: pd-standard
agent_instance_type: &amp;#34;MIGRATE&amp;#34;
agent_type: private
start_id: 0001
end_id: 0001

gcloudbin: gcloud
image: &amp;#39;centos-7-v20161027&amp;#39;
image_project: &amp;#39;centos-cloud&amp;#39;
bootstrap_public_port: 8080
cluster_name: cluster_name
scopes: &amp;#34;default=https://www.googleapis.com/auth/cloud-platform&amp;#34;
dcos_installer_filename: dcos_generate_config.sh
dcos_installer_download_path: &amp;#34;https://downloads.dcos.io/dcos/stable/{{ dcos_installer_filename }}&amp;#34;
home_directory: &amp;#34;/home/{{ login_name }}&amp;#34;
downloads_from_bootstrap: 2
dcos_bootstrap_container: dcosinstaller
&lt;/code>&lt;/pre>&lt;p>Then to create the master I ran:&lt;/p></description></item><item><title>Parsing Deeply Nested JSON in Go</title><link>https://serverbooter.com/post/parsing-nested-json-in-go/</link><pubDate>Fri, 28 Apr 2017 16:28:29 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/parsing-nested-json-in-go/</guid><description>&lt;p>Parsing deeply nested json in Go is a bit challenging due to the fact that the language doesn&amp;rsquo;t provide many helpers to do so. If you do that in Ruby or Python it&amp;rsquo;s pretty straight forward running some like this in Python &lt;code>j = json.load(jsonstring)&lt;/code> or in Ruby &lt;code>j = JSON.load(jsonstring)&lt;/code>.&lt;/p>
&lt;p>In go generally you have to prefine your structs and run through an &lt;code>Unmarshal&lt;/code> function which means that most of the times you need to know ahead of time what the nest level and structure of your target json is to parse it. For example:&lt;/p></description></item><item><title>CloudNativeCon KubeCon Europe</title><link>https://serverbooter.com/post/cloudnativecon-kubecon-europe/</link><pubDate>Tue, 25 Apr 2017 16:28:29 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/cloudnativecon-kubecon-europe/</guid><description>&lt;p>This same blog entry is &lt;a href="https://www.cncf.io/blog/2017/04/18/diversity-scholarship-series-berlin-eyes-cloud-infrastructure-fanatic/">here&lt;/a>. Thanks to the cncf folks who helped me put this together.&lt;/p>
&lt;hr>
&lt;p>I’ve attended many conferences before, but I was happy to get the diversity scholarship to attend CloudNativeCon + KubeCon Europe 2017 in Berlin as there is always so much more to learn. It was my first time attending an event organized by the Linux Foundation, and I hope to attend more in the future.
I loved all the insights and advances that I obtained through all of the highlighted Cloud Native projects including Kubernetes, gRPC, OpenTracing, Prometheus, Linkerd, Fluentd and OpenDNS from the variety of industry leaders. The keynotes were quite memorable as well, including the Kubernetes 1.6 updates by Aparna Sinha (Google), Federation from Kelsey Hightower (Google), Kubernetes Security Updates from Clayton Coleman (Red Hat), Helm from Michelle Noorali (Deis), Scaling Kubernetes from Joe Beda (Heptio) and Quay from Brandon Phillips (CoreOS).&lt;/p></description></item><item><title>About Me</title><link>https://serverbooter.com/page/about/</link><pubDate>Tue, 25 Apr 2017 16:24:50 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/page/about/</guid><description>&lt;p>Ricardo is a Cloud Native AI Lead. He&amp;rsquo;s an open-source enthusiast, currently serving on the CNCF TOC and as Lead for the CNCF Cloud Native AI Initiatives. He has also co-chaired the CNCF TAG-Runtime. Recently, he led the publication of the Cloud Native AI Whitepaper and is currently leading various initiatives within the Cloud Native AI Working Group.&lt;/p>
&lt;p>He has worked in tech and software engineering roles for over 25 years. He comes from a diverse professional background, having held various roles at large companies such as Rakuten, Cisco, and VMware, as well as at startups like Truera, Branch Metrics, and Coupa.&lt;/p></description></item><item><title>LXC Playing</title><link>https://serverbooter.com/post/lxc-playing/</link><pubDate>Sat, 29 Oct 2016 16:28:29 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/lxc-playing/</guid><description>&lt;p>Over the last couple of years Docker has seen incredible growth across the tech industry. Its use ties together with deployment of Microservices in most Cloud based companies. Docker is easy to use and its in constant development.
In the last month I decided to venture and try something different that has been around even before Docker but in a more primitive form. You see containers have been around before Docker for a long time and even before that with the introduction of chroot in 1979. Containers were first introduced in Solaris in 2005 with the introduction of Solaris Containers, described as &amp;lsquo;chroot&amp;rsquo; on steroids. Then later in 2008 with adoption of the Containers name by LXC. (what Docker was based on initially) and also the inclusion of user namespaces in the Linux Kernel 3.8.&lt;/p></description></item><item><title>Docker First Impressions</title><link>https://serverbooter.com/post/docker-first-impressions/</link><pubDate>Fri, 07 Mar 2014 16:28:29 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/docker-first-impressions/</guid><description>&lt;p>For the last few days I&amp;rsquo;ve been taking at crack at using the recent &lt;a href="https://www.docker.io/">Docker&lt;/a> container deployment tool that I&amp;rsquo;ve been
hearing a lot buzz about.
In essence, it&amp;rsquo;s a wrapper on top of Linux &lt;a href="https://linuxcontainers.org/">LXC containers&lt;/a>, writen in the new friendly and not so popular yet &lt;a href="http://golang.org/">Go&lt;/a> language developed at Google.&lt;/p>
&lt;p>Just a little bit of background, for those of you not familiar with LXC containers,
they are pretty much defined as &lt;code>chroot&lt;/code> on steroids. Basically, you can run isolated virtual
environments in a single Linux machine and make it look like that they are different machines.
These environments give you the advantage of being isalated and at the same they are able to use
the same Linux exectutables and memory space to improve speed and footprint size.&lt;/p></description></item><item><title>Ansible Playbook for PaperTrail on Ubuntu</title><link>https://serverbooter.com/post/ansible-playbook-for-papertrail-on-ubuntu/</link><pubDate>Tue, 29 Oct 2013 11:54:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/ansible-playbook-for-papertrail-on-ubuntu/</guid><description>&lt;p>This posts describes how to create a simple
&lt;a href="http://www.ansible.com">Ansible&lt;/a> task
on how to setup &lt;a href="https://www.papertrailapp.com">PaperTrail&lt;/a> on Ubuntu.&lt;/p>
&lt;p>It&amp;rsquo;s a follow up to a previous
&lt;a href="https://serverbooter.com/post/how-to-create-an-ansible-playbook-to-configure-haproxy/">blog&lt;/a>
describing an Ansible Playbook to setup an HAProxy system. This Ansible &lt;code>task&lt;/code> can
be included in the HAProxy playbook as well as any other playbooks with something
like this:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">PLAYBOOK&lt;/span>: &lt;span style="color:#ae81ff">Install papertrail on Ubuntu&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>- &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">scout&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">hosts&lt;/span>: &lt;span style="color:#ae81ff">all&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">user&lt;/span>: &lt;span style="color:#ae81ff">&amp;lt;user-with-sudo&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">sudo&lt;/span>: &lt;span style="color:#66d9ef">True&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">tasks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">include&lt;/span>: &lt;span style="color:#ae81ff">tasks/papertrail.yml&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Next, we define the &lt;code>task&lt;/code> that includes installing the dependencies
rsyslog and libssl-dev. Also we copy a specific rsyslog configuration
for papertrail.&lt;/p></description></item><item><title>Simple Clouformation With Multiple AWS Accounts</title><link>https://serverbooter.com/post/simple-clouformation-with-multiple-aws-accounts/</link><pubDate>Thu, 24 Oct 2013 16:28:29 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/simple-clouformation-with-multiple-aws-accounts/</guid><description>&lt;p>In this post I&amp;rsquo;ll describe how to create a simple AWS CloudFormation template
so that we can deploy stack using multiple AWS accounts. In other words a common
JSON CloudFormation template that can be use to bring
up a stack in multiple accounts. The way we are able to do this is by
having exact copies of the &lt;a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html">EC2 AMIs&lt;/a>
on all the accounts and regions where we are deploying our stack.&lt;/p></description></item><item><title>Ansible Playbook for Scout on Ubuntu</title><link>https://serverbooter.com/post/ansible-playbook-for-scout-on-ubuntu/</link><pubDate>Tue, 22 Oct 2013 00:00:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/ansible-playbook-for-scout-on-ubuntu/</guid><description>&lt;p>This is a sample Ansible task (&lt;a href="http://www.ansibleworks.com">http://www.ansibleworks.com&lt;/a>)
on how to setup Scout (&lt;a href="https://www.scoutapp.com">https://www.scoutapp.com&lt;/a>) on Ubuntu.
It needs to be included in an ansible playbook.&lt;/p>
&lt;p>It&amp;rsquo;s a follow up to a previous
[blog]({% post_url 2013-10-21-how-to-create-an-ansible-playbook-to-configure-haproxy %})
describing an Ansible Playbook to setup an HAProxy system. This Ansible task can
be included in the HAProxy playbook as well as any other playbooks with something
like this:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">PLAYBOOK&lt;/span>: &lt;span style="color:#ae81ff">Install scout on Ubuntu&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>- &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">scout&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">hosts&lt;/span>: &lt;span style="color:#ae81ff">all&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">user&lt;/span>: &lt;span style="color:#ae81ff">user-with-sudo&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">sudo&lt;/span>: &lt;span style="color:#66d9ef">True&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">vars&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">scout_key&lt;/span>: &lt;span style="color:#ae81ff">YourScoutAPIKeyFromTheirWebsite&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">tasks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">include&lt;/span>: &lt;span style="color:#ae81ff">tasks/scout.yml&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>We start by defining a &amp;ldquo;task&amp;rdquo; file:&lt;/p></description></item><item><title>Upgrade Linux Kernel on Chromebook</title><link>https://serverbooter.com/post/upgrade-linux-kernel-on-chromebook/</link><pubDate>Mon, 21 Oct 2013 22:15:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/upgrade-linux-kernel-on-chromebook/</guid><description>&lt;p>So after installing ChrUbuntu on my Acer C7 Chromebook,
I&amp;rsquo;m very pleased that with the help of this
&lt;!-- raw HTML omitted -->blog&lt;!-- raw HTML omitted -->
I was able to upgrade the Linux Kernel to 3.8.11&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>raravena@chromebook:~/git/blog-src$ uname -a
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Linux chromebook 3.8.11 &lt;span style="color:#75715e">#3 SMP Thu Oct 17 07:41:20 PDT 2013 x86_64 x86_64 x86_64 GNU/Linux&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>These are the modified steps:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>set -x
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Grab verified boot utilities from ChromeOS.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkdir -p /usr/share/vboot
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mount -o ro /dev/sda3 /mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cp /mnt/usr/bin/vbutil_* /usr/bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkdir -p /usr/bin/old_bins
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cp /mnt/usr/bin/old_bins/vbutil_* /usr/bin/old_bins/.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cp /mnt/usr/bin/dump_kernel_config /usr/bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rsync -avz /mnt/usr/share/vboot/ /usr/share/vboot/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>umount /mnt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># On the Acer C7, ChromeOS is 32-bit, so the verified boot binaries need a&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># few 32-bit shared libraries to run under ChrUbuntu, which is 64-bit.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>apt-get install libc6:i386 libssl1.0.0:i386
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Fetch ChromeOS kernel sources from the Git repo.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>apt-get install git-core
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd /usr/src
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git clone https://git.chromium.org/git/chromiumos/third_party/kernel-next.git
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd kernel-next
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git checkout origin/chromeos-3.8
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Configure the kernel&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># First we patch ``base.config`` to set ``CONFIG_SECURITY_CHROMIUMOS``&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># to ``n`` ...&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cp ./chromeos/config/base.config ./chromeos/config/base.config.orig
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sed -e &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> &lt;span style="color:#e6db74">&amp;#39;s/CONFIG_SECURITY_CHROMIUMOS=y/CONFIG_SECURITY_CHROMIUMOS=n/&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> ./chromeos/config/base.config.orig &amp;gt; ./chromeos/config/base.config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./chromeos/scripts/prepareconfig chromeos-intel-pineview
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ... and then we proceed as per Olaf&amp;#39;s instructions&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>yes &lt;span style="color:#e6db74">&amp;#34;&amp;#34;&lt;/span> | make oldconfig
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Build the Ubuntu kernel packages&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>apt-get install kernel-package
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make-kpkg kernel_image kernel_headers
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Backup current kernel and kernel modules&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tstamp&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>date +%Y-%m-%d-%H%M&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dd &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>/dev/sda6 of&lt;span style="color:#f92672">=&lt;/span>/kernel-backup-$tstamp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cp -Rp /lib/modules/3.4.0 /lib/modules/3.4.0-backup-$tstamp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Install kernel image and modules from the Ubuntu kernel packages we&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># just created.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dpkg -i /usr/src/linux-*.deb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Extract old kernel config&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vbutil_kernel --verify /dev/sda6 --verbose | tail -1 &amp;gt; /config-$tstamp-orig.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Add ``disablevmx=off`` to the command line, so that VMX is enabled (for VirtualBox &amp;amp; Co)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sed -e &lt;span style="color:#e6db74">&amp;#39;s/$/ disablevmx=off/&amp;#39;&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> /config-$tstamp-orig.txt &amp;gt; /config-$tstamp.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Wrap the new kernel with the verified block and with the new config.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vbutil_kernel --pack /newkernel &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --keyblock /usr/share/vboot/devkeys/kernel.keyblock &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --version &lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --signprivate /usr/share/vboot/devkeys/kernel_data_key.vbprivk &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --config&lt;span style="color:#f92672">=&lt;/span>/config-$tstamp.txt &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --vmlinuz /boot/vmlinuz-3.8.11 &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> --arch x86_64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Make sure the new kernel verifies OK.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vbutil_kernel --verify /newkernel
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Copy the new kernel to the KERN-C partition.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dd &lt;span style="color:#66d9ef">if&lt;/span>&lt;span style="color:#f92672">=&lt;/span>/newkernel of&lt;span style="color:#f92672">=&lt;/span>/dev/sda6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>I ran into an error while compiling the kernel, but gladly was able to fix it&lt;/p></description></item><item><title>How To Create an Ansible Playbook to Configure HAProxy</title><link>https://serverbooter.com/post/how-to-create-an-ansible-playbook-to-configure-haproxy/</link><pubDate>Mon, 21 Oct 2013 00:00:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/how-to-create-an-ansible-playbook-to-configure-haproxy/</guid><description>&lt;p>This is the continuation for &lt;a href="https://serverbooter.com/post/setup-a-simple-haproxy-config/">Setup a simple HAproxy config&lt;/a>&lt;/p>
&lt;p>It explains how to create an Ansible playbook to automate the haproxy
configuration.&lt;/p>
&lt;p>If you&amp;rsquo;d like to find out more about Ansible you can read up on it on
their website: &lt;a href="http://www.ansible.com">http://www.ansible.com&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>---
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Set up and configure an HaProxy server (Ubuntu flavor)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>- &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">haproxy&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">hosts&lt;/span>: &lt;span style="color:#ae81ff">all&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">user&lt;/span>: &lt;span style="color:#ae81ff">userwithsudoaccess&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">sudo&lt;/span>: &lt;span style="color:#66d9ef">True&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">tags&lt;/span>: &lt;span style="color:#ae81ff">haproxy&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">vars_files&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;vars/main.yml&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">tasks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># haproxy package for Ubuntu&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">include&lt;/span>: &lt;span style="color:#ae81ff">tasks/haproxy-apt.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># Specific haproxy tasks follow here&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">Copy haproxy logrotate file&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">action&lt;/span>: &amp;gt;&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> copy src=files/haproxy.logrotate dest=/etc/logrotate.d/haproxy
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> mode=0644 owner=root group=root&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">Create haproxy rsyslog configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">action&lt;/span>: &amp;gt;&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> copy src=files/haproxy-rsyslog.conf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> dest=/etc/rsyslog.d/49-haproxy.conf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> mode=0644 owner=root group=root&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">notify&lt;/span>: &lt;span style="color:#ae81ff">restart rsyslog&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">Configure system rsyslog&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">action&lt;/span>: &amp;gt;&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> copy src=files/rsyslog.conf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> dest=/etc/rsyslog.conf
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> mode=0644 owner=root group=root&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">notify&lt;/span>: &lt;span style="color:#ae81ff">restart rsyslog&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">Create haproxy configuration file&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">action&lt;/span>: &amp;gt;&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> template src=templates/haproxy.cfg.j2 dest=/etc/haproxy/haproxy.cfg
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> mode=0644 owner=root group=root&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">notify&lt;/span>: &lt;span style="color:#ae81ff">restart haproxy&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The following file that contains the variables needed for the haproxy playbook
it should located under vars (vars/main.yml)&lt;/p></description></item><item><title>Setup a Simple HAProxy Config</title><link>https://serverbooter.com/post/setup-a-simple-haproxy-config/</link><pubDate>Mon, 21 Oct 2013 00:00:00 +0000</pubDate><author>raravena80@gmail.com (Ricardo Aravena)</author><guid>https://serverbooter.com/post/setup-a-simple-haproxy-config/</guid><description>&lt;p>Here&amp;rsquo;s simple haproxy configuration to get you started,
you probably want to stick this under /etc/haproxy/haproxy.cfg&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span>global
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	log 127.0.0.1	local0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	log 127.0.0.1	local1 notice
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	maxconn 4096
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	user haproxy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	group haproxy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	daemon
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>defaults
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	log	global
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	mode	http
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	option	httplog
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	option	dontlognull
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	retries	3
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	option redispatch
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	maxconn	4096
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	contimeout	5000
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	clitimeout	50000
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	srvtimeout	50000
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	stats enable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	stats auth		admin:password
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	stats uri		/monitor
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	stats refresh	5s
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	option httpchk	GET /status
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	retries		5
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	option redispatch
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	errorfile	503	/etc/haproxy/errors/503.http
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	errorfile	400	/etc/haproxy/errors/400.http
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	errorfile	403	/etc/haproxy/errors/403.http
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	errorfile	408	/etc/haproxy/errors/408.http
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	errorfile	500	/etc/haproxy/errors/500.http
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	errorfile	502	/etc/haproxy/errors/502.http
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	errorfile	503	/etc/haproxy/errors/503.http
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	errorfile	504	/etc/haproxy/errors/504.http
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	balance roundrobin	# each server is used in turns, according to assigned weight
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>listen http-in
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bind :80
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> monitor-uri /haproxy # end point to monitor HAProxy status (returns 200)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> # option httpclose
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server server1 server1.mydomain.com:8080 weight 1 maxconn 2000 check inter 4000
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server server2 server2.mydomain.com:8080 weight 1 maxconn 2000 check inter 4000
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server server3 server3.mydomain.com:8080 weight 1 maxconn 2000 check inter 4000
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rspidel ^Set-cookie:\ IP=	# do not let this cookie tell our internal IP address
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>You also want to setup logging using rsyslog,
you can syslog-ng or other loggers too as well,
but the configuration is different.&lt;/p></description></item></channel></rss>
<!doctype html><html lang=en-us itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Posts -</title><meta name=author content="Ricardo Aravena"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"","url":"https:\/\/serverbooter.com\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/serverbooter.com\/"}</script><meta property="og:title" content="Posts"><meta property="og:url" content="https://serverbooter.com/post/"><meta property="og:type" content="website"><meta property="og:site_name" content><meta name=twitter:title content="Posts"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@raravena80"><meta name=twitter:creator content="@raravena80"><link href=https://serverbooter.com/img/favicon.png rel=icon type=image/x-icon><meta name=generator content="Hugo 0.148.2"><link rel=alternate href=https://serverbooter.com/index.xml type=application/rss+xml title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css integrity=sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v6.6.0/css/all.css integrity=sha384-h/hnnw1Bi4nbpD6kE7nYfCXzovi622sY5WBxww8ARKwpdLj5kUWjRuyiXaD1U2JT crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><link rel=stylesheet href=https://serverbooter.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://serverbooter.com/css/syntax.css><link rel=stylesheet href=https://serverbooter.com/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous><meta name=color-scheme content="light dark"><meta name=theme-color content="#ffffff" media="(prefers-color-scheme: light)"><meta name=theme-color content="#1a1a1a" media="(prefers-color-scheme: dark)"><script>(function(){const e=document.documentElement,t=localStorage.getItem("theme");if(t==="dark")e.setAttribute("data-theme","dark"),e.classList.add("theme-dark"),e.classList.remove("theme-light");else if(t==="light")e.setAttribute("data-theme","light"),e.classList.add("theme-light"),e.classList.remove("theme-dark");else{const t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;t?(e.setAttribute("data-theme","dark"),e.classList.add("theme-dark"),e.classList.remove("theme-light")):(e.setAttribute("data-theme","light"),e.classList.add("theme-light"),e.classList.remove("theme-dark"))}})();function toggleTheme(){const e=document.documentElement,t=e.getAttribute("data-theme")==="dark";t?(e.setAttribute("data-theme","light"),e.classList.add("theme-light"),e.classList.remove("theme-dark"),localStorage.setItem("theme","light")):(e.setAttribute("data-theme","dark"),e.classList.add("theme-dark"),e.classList.remove("theme-light"),localStorage.setItem("theme","dark")),setTimeout(()=>{typeof DISQUS!="undefined"&&DISQUS.reset({reload:!0,config:function(){this.page.url=window.location.href,this.page.identifier=window.location.pathname}})},100)}</script><link rel=stylesheet href=https://serverbooter.com/css/custom.css><button class=theme-toggle onclick=toggleTheme() title="Toggle dark/light mode">
<span class=sun-icon>‚òÄÔ∏è</span>
<span class=moon-icon>üåô</span></button></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=https://serverbooter.com/></a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Blog href=/>Blog</a></li><li><a title=Speaking href=/page/speaking/>Speaking</a></li><li><a title=About href=/page/about/>About</a></li><li><a title=Tags href=/tags>Tags</a></li></ul></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Posts</h1><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;April 19, 2025
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Ricardo Aravena</span></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=posts-list><article class=post-preview><a href=https://serverbooter.com/post/cloudnativecon-kubecon-europe/><h2 class=post-title>CloudNativeCon KubeCon Europe</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;April 25, 2017
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Ricardo Aravena</span></p><div class=post-entry><p>This same blog entry is <a href=https://www.cncf.io/blog/2017/04/18/diversity-scholarship-series-berlin-eyes-cloud-infrastructure-fanatic/>here</a>. Thanks to the cncf folks who helped me put this together.</p><hr><p>I‚Äôve attended many conferences before, but I was happy to get the diversity scholarship to attend CloudNativeCon + KubeCon Europe 2017 in Berlin as there is always so much more to learn. It was my first time attending an event organized by the Linux Foundation, and I hope to attend more in the future.
I loved all the insights and advances that I obtained through all of the highlighted Cloud Native projects including Kubernetes, gRPC, OpenTracing, Prometheus, Linkerd, Fluentd and OpenDNS from the variety of industry leaders. The keynotes were quite memorable as well, including the Kubernetes 1.6 updates by Aparna Sinha (Google), Federation from Kelsey Hightower (Google), Kubernetes Security Updates from Clayton Coleman (Red Hat), Helm from Michelle Noorali (Deis), Scaling Kubernetes from Joe Beda (Heptio) and Quay from Brandon Phillips (CoreOS).</p><a href=https://serverbooter.com/post/cloudnativecon-kubecon-europe/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://serverbooter.com//tags/cloudnative/>cloudnative</a>&nbsp;
<a href=https://serverbooter.com//tags/kubecon/>kubecon</a>&nbsp;
<a href=https://serverbooter.com//tags/kubernetes/>kubernetes</a>&nbsp;
<a href=https://serverbooter.com//tags/cncf/>cncf</a>&nbsp;</div></article><article class=post-preview><a href=https://serverbooter.com/post/lxc-playing/><h2 class=post-title>LXC Playing</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;October 29, 2016
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Ricardo Aravena</span></p><div class=post-entry><p>Over the last couple of years Docker has seen incredible growth across the tech industry. Its use ties together with deployment of Microservices in most Cloud based companies. Docker is easy to use and its in constant development.
In the last month I decided to venture and try something different that has been around even before Docker but in a more primitive form. You see containers have been around before Docker for a long time and even before that with the introduction of chroot in 1979. Containers were first introduced in Solaris in 2005 with the introduction of Solaris Containers, described as &lsquo;chroot&rsquo; on steroids. Then later in 2008 with adoption of the Containers name by LXC. (what Docker was based on initially) and also the inclusion of user namespaces in the Linux Kernel 3.8.</p><a href=https://serverbooter.com/post/lxc-playing/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://serverbooter.com//tags/cloudnative/>cloudnative</a>&nbsp;
<a href=https://serverbooter.com//tags/lxc/>lxc</a>&nbsp;</div></article><article class=post-preview><a href=https://serverbooter.com/post/docker-first-impressions/><h2 class=post-title>Docker First Impressions</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;March 7, 2014
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Ricardo Aravena</span></p><div class=post-entry><p>For the last few days I&rsquo;ve been taking at crack at using the recent <a href=https://www.docker.io/>Docker</a> container deployment tool that I&rsquo;ve been
hearing a lot buzz about.
In essence, it&rsquo;s a wrapper on top of Linux <a href=https://linuxcontainers.org/>LXC containers</a>, writen in the new friendly and not so popular yet <a href=http://golang.org/>Go</a> language developed at Google.</p><p>Just a little bit of background, for those of you not familiar with LXC containers,
they are pretty much defined as <code>chroot</code> on steroids. Basically, you can run isolated virtual
environments in a single Linux machine and make it look like that they are different machines.
These environments give you the advantage of being isalated and at the same they are able to use
the same Linux exectutables and memory space to improve speed and footprint size.</p><a href=https://serverbooter.com/post/docker-first-impressions/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://serverbooter.com//tags/docker/>docker</a>&nbsp;</div></article><article class=post-preview><a href=https://serverbooter.com/post/ansible-playbook-for-papertrail-on-ubuntu/><h2 class=post-title>Ansible Playbook for PaperTrail on Ubuntu</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;October 29, 2013
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Ricardo Aravena</span></p><div class=post-entry><p>This posts describes how to create a simple
<a href=http://www.ansible.com>Ansible</a> task
on how to setup <a href=https://www.papertrailapp.com>PaperTrail</a> on Ubuntu.</p><p>It&rsquo;s a follow up to a previous
<a href=/post/how-to-create-an-ansible-playbook-to-configure-haproxy/>blog</a>
describing an Ansible Playbook to setup an HAProxy system. This Ansible <code>task</code> can
be included in the HAProxy playbook as well as any other playbooks with something
like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>PLAYBOOK</span>: <span style=color:#ae81ff>Install papertrail on Ubuntu</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>scout</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>hosts</span>: <span style=color:#ae81ff>all</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>user</span>: <span style=color:#ae81ff>&lt;user-with-sudo&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>sudo</span>: <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tasks</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>include</span>: <span style=color:#ae81ff>tasks/papertrail.yml</span>
</span></span></code></pre></div><p>Next, we define the <code>task</code> that includes installing the dependencies
rsyslog and libssl-dev. Also we copy a specific rsyslog configuration
for papertrail.</p><a href=https://serverbooter.com/post/ansible-playbook-for-papertrail-on-ubuntu/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://serverbooter.com//tags/ansible/>ansible</a>&nbsp;
<a href=https://serverbooter.com//tags/papertrailapp/>papertrailapp</a>&nbsp;
<a href=https://serverbooter.com//tags/logging/>logging</a>&nbsp;
<a href=https://serverbooter.com//tags/ubuntu/>ubuntu</a>&nbsp;</div></article><article class=post-preview><a href=https://serverbooter.com/post/simple-clouformation-with-multiple-aws-accounts/><h2 class=post-title>Simple Clouformation With Multiple AWS Accounts</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;October 24, 2013
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Ricardo Aravena</span></p><div class=post-entry><p>In this post I&rsquo;ll describe how to create a simple AWS CloudFormation template
so that we can deploy stack using multiple AWS accounts. In other words a common
JSON CloudFormation template that can be use to bring
up a stack in multiple accounts. The way we are able to do this is by
having exact copies of the <a href=http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ComponentsAMIs.html>EC2 AMIs</a>
on all the accounts and regions where we are deploying our stack.</p><a href=https://serverbooter.com/post/simple-clouformation-with-multiple-aws-accounts/ class=post-read-more>[Read More]</a></div></article><article class=post-preview><a href=https://serverbooter.com/post/ansible-playbook-for-scout-on-ubuntu/><h2 class=post-title>Ansible Playbook for Scout on Ubuntu</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;October 22, 2013
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Ricardo Aravena</span></p><div class=post-entry><p>This is a sample Ansible task (<a href=http://www.ansibleworks.com>http://www.ansibleworks.com</a>)
on how to setup Scout (<a href=https://www.scoutapp.com>https://www.scoutapp.com</a>) on Ubuntu.
It needs to be included in an ansible playbook.</p><p>It&rsquo;s a follow up to a previous
[blog]({% post_url 2013-10-21-how-to-create-an-ansible-playbook-to-configure-haproxy %})
describing an Ansible Playbook to setup an HAProxy system. This Ansible task can
be included in the HAProxy playbook as well as any other playbooks with something
like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#f92672>PLAYBOOK</span>: <span style=color:#ae81ff>Install scout on Ubuntu</span>
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>scout</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>hosts</span>: <span style=color:#ae81ff>all</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>user</span>: <span style=color:#ae81ff>user-with-sudo</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>sudo</span>: <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>vars</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>scout_key</span>: <span style=color:#ae81ff>YourScoutAPIKeyFromTheirWebsite</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tasks</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>include</span>: <span style=color:#ae81ff>tasks/scout.yml</span>
</span></span></code></pre></div><p>We start by defining a &ldquo;task&rdquo; file:</p><a href=https://serverbooter.com/post/ansible-playbook-for-scout-on-ubuntu/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://serverbooter.com//tags/ansible/>ansible</a>&nbsp;
<a href=https://serverbooter.com//tags/scout/>scout</a>&nbsp;</div></article><article class=post-preview><a href=https://serverbooter.com/post/upgrade-linux-kernel-on-chromebook/><h2 class=post-title>Upgrade Linux Kernel on Chromebook</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;October 21, 2013
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Ricardo Aravena</span></p><div class=post-entry><p>So after installing ChrUbuntu on my Acer C7 Chromebook,
I&rsquo;m very pleased that with the help of this
blog
I was able to upgrade the Linux Kernel to 3.8.11</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>raravena@chromebook:~/git/blog-src$ uname -a
</span></span><span style=display:flex><span>Linux chromebook 3.8.11 <span style=color:#75715e>#3 SMP Thu Oct 17 07:41:20 PDT 2013 x86_64 x86_64 x86_64 GNU/Linux</span>
</span></span></code></pre></div><p>These are the modified steps:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>set -x
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Grab verified boot utilities from ChromeOS.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>mkdir -p /usr/share/vboot
</span></span><span style=display:flex><span>mount -o ro /dev/sda3 /mnt
</span></span><span style=display:flex><span>cp /mnt/usr/bin/vbutil_* /usr/bin
</span></span><span style=display:flex><span>mkdir -p /usr/bin/old_bins
</span></span><span style=display:flex><span>cp /mnt/usr/bin/old_bins/vbutil_* /usr/bin/old_bins/.
</span></span><span style=display:flex><span>cp /mnt/usr/bin/dump_kernel_config /usr/bin
</span></span><span style=display:flex><span>rsync -avz /mnt/usr/share/vboot/ /usr/share/vboot/
</span></span><span style=display:flex><span>umount /mnt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># On the Acer C7, ChromeOS is 32-bit, so the verified boot binaries need a</span>
</span></span><span style=display:flex><span><span style=color:#75715e># few 32-bit shared libraries to run under ChrUbuntu, which is 64-bit.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>apt-get install libc6:i386 libssl1.0.0:i386
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Fetch ChromeOS kernel sources from the Git repo.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>apt-get install git-core
</span></span><span style=display:flex><span>cd /usr/src
</span></span><span style=display:flex><span>git clone  https://git.chromium.org/git/chromiumos/third_party/kernel-next.git
</span></span><span style=display:flex><span>cd kernel-next
</span></span><span style=display:flex><span>git checkout origin/chromeos-3.8
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Configure the kernel</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># First we patch ``base.config`` to set ``CONFIG_SECURITY_CHROMIUMOS``</span>
</span></span><span style=display:flex><span><span style=color:#75715e># to ``n`` ...</span>
</span></span><span style=display:flex><span>cp ./chromeos/config/base.config ./chromeos/config/base.config.orig
</span></span><span style=display:flex><span>sed -e <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  <span style=color:#e6db74>&#39;s/CONFIG_SECURITY_CHROMIUMOS=y/CONFIG_SECURITY_CHROMIUMOS=n/&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  ./chromeos/config/base.config.orig &gt; ./chromeos/config/base.config
</span></span><span style=display:flex><span>./chromeos/scripts/prepareconfig chromeos-intel-pineview
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ... and then we proceed as per Olaf&#39;s instructions</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>yes <span style=color:#e6db74>&#34;&#34;</span> | make oldconfig
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Build the Ubuntu kernel packages</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>apt-get install kernel-package
</span></span><span style=display:flex><span>make-kpkg kernel_image kernel_headers
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Backup current kernel and kernel modules</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>tstamp<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>date +%Y-%m-%d-%H%M<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>dd <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>/dev/sda6 of<span style=color:#f92672>=</span>/kernel-backup-$tstamp
</span></span><span style=display:flex><span>cp -Rp /lib/modules/3.4.0 /lib/modules/3.4.0-backup-$tstamp
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Install kernel image and modules from the Ubuntu kernel packages we</span>
</span></span><span style=display:flex><span><span style=color:#75715e># just created.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>dpkg -i /usr/src/linux-*.deb
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Extract old kernel config</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>vbutil_kernel --verify /dev/sda6 --verbose | tail -1 &gt; /config-$tstamp-orig.txt
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add ``disablevmx=off`` to the command line, so that VMX is enabled (for VirtualBox &amp; Co)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>sed -e <span style=color:#e6db74>&#39;s/$/ disablevmx=off/&#39;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  /config-$tstamp-orig.txt &gt; /config-$tstamp.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Wrap the new kernel with the verified block and with the new config.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>vbutil_kernel --pack /newkernel <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --keyblock /usr/share/vboot/devkeys/kernel.keyblock <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --version <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --signprivate /usr/share/vboot/devkeys/kernel_data_key.vbprivk <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --config<span style=color:#f92672>=</span>/config-$tstamp.txt <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --vmlinuz /boot/vmlinuz-3.8.11 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --arch x86_64
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Make sure the new kernel verifies OK.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>vbutil_kernel --verify /newkernel
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Copy the new kernel to the KERN-C partition.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>dd <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>/newkernel of<span style=color:#f92672>=</span>/dev/sda6
</span></span></code></pre></div><p>I ran into an error while compiling the kernel, but gladly was able to fix it</p><a href=https://serverbooter.com/post/upgrade-linux-kernel-on-chromebook/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://serverbooter.com//tags/linux/>linux</a>&nbsp;
<a href=https://serverbooter.com//tags/kernel/>kernel</a>&nbsp;
<a href=https://serverbooter.com//tags/chromebook/>chromebook</a>&nbsp;</div></article><article class=post-preview><a href=https://serverbooter.com/post/how-to-create-an-ansible-playbook-to-configure-haproxy/><h2 class=post-title>How To Create an Ansible Playbook to Configure HAProxy</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;October 21, 2013
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Ricardo Aravena</span></p><div class=post-entry><p>This is the continuation for <a href=/post/setup-a-simple-haproxy-config/>Setup a simple HAproxy config</a></p><p>It explains how to create an Ansible playbook to automate the haproxy
configuration.</p><p>If you&rsquo;d like to find out more about Ansible you can read up on it on
their website: <a href=http://www.ansible.com>http://www.ansible.com</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#75715e># Set up and configure an HaProxy server (Ubuntu flavor)</span>
</span></span><span style=display:flex><span>- <span style=color:#f92672>name</span>: <span style=color:#ae81ff>haproxy</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>hosts</span>: <span style=color:#ae81ff>all</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>user</span>: <span style=color:#ae81ff>userwithsudoaccess</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>sudo</span>: <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tags</span>: <span style=color:#ae81ff>haproxy</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>vars_files</span>:
</span></span><span style=display:flex><span>    - <span style=color:#e6db74>&#34;vars/main.yml&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>tasks</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># haproxy package for Ubuntu</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>include</span>: <span style=color:#ae81ff>tasks/haproxy-apt.yml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Specific haproxy tasks follow here</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Copy haproxy logrotate file</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>action</span>: &gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        copy src=files/haproxy.logrotate dest=/etc/logrotate.d/haproxy
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        mode=0644 owner=root group=root</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Create haproxy rsyslog configuration</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>action</span>: &gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        copy src=files/haproxy-rsyslog.conf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        dest=/etc/rsyslog.d/49-haproxy.conf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        mode=0644 owner=root group=root</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>notify</span>: <span style=color:#ae81ff>restart rsyslog</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Configure system rsyslog</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>action</span>: &gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        copy src=files/rsyslog.conf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        dest=/etc/rsyslog.conf
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        mode=0644 owner=root group=root</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>notify</span>: <span style=color:#ae81ff>restart rsyslog</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Create haproxy configuration file</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>action</span>: &gt;<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        template src=templates/haproxy.cfg.j2 dest=/etc/haproxy/haproxy.cfg
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        mode=0644 owner=root group=root</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>notify</span>: <span style=color:#ae81ff>restart haproxy</span>
</span></span></code></pre></div><p>The following file that contains the variables needed for the haproxy playbook
it should located under vars (vars/main.yml)</p><a href=https://serverbooter.com/post/how-to-create-an-ansible-playbook-to-configure-haproxy/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://serverbooter.com//tags/haproxy/>haproxy</a>&nbsp;</div></article><article class=post-preview><a href=https://serverbooter.com/post/setup-a-simple-haproxy-config/><h2 class=post-title>Setup a Simple HAProxy Config</h2></a><p class=post-meta><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;October 21, 2013
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Ricardo Aravena</span></p><div class=post-entry><p>Here&rsquo;s simple haproxy configuration to get you started,
you probably want to stick this under /etc/haproxy/haproxy.cfg</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>global
</span></span><span style=display:flex><span>	log 127.0.0.1	local0
</span></span><span style=display:flex><span>	log 127.0.0.1	local1 notice
</span></span><span style=display:flex><span>	maxconn 4096
</span></span><span style=display:flex><span>	user haproxy
</span></span><span style=display:flex><span>	group haproxy
</span></span><span style=display:flex><span>	daemon
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>defaults
</span></span><span style=display:flex><span>	log	global
</span></span><span style=display:flex><span>	mode	http
</span></span><span style=display:flex><span>	option	httplog
</span></span><span style=display:flex><span>	option	dontlognull
</span></span><span style=display:flex><span>	retries	3
</span></span><span style=display:flex><span>	option redispatch
</span></span><span style=display:flex><span>	maxconn	4096
</span></span><span style=display:flex><span>	contimeout	5000
</span></span><span style=display:flex><span>	clitimeout	50000
</span></span><span style=display:flex><span>	srvtimeout	50000
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	stats enable
</span></span><span style=display:flex><span>	stats auth		admin:password
</span></span><span style=display:flex><span>	stats uri		/monitor
</span></span><span style=display:flex><span>	stats refresh	5s
</span></span><span style=display:flex><span>	option httpchk	GET /status
</span></span><span style=display:flex><span>	retries		5
</span></span><span style=display:flex><span>	option redispatch
</span></span><span style=display:flex><span>	errorfile	503	/etc/haproxy/errors/503.http
</span></span><span style=display:flex><span>	errorfile	400	/etc/haproxy/errors/400.http
</span></span><span style=display:flex><span>	errorfile	403	/etc/haproxy/errors/403.http
</span></span><span style=display:flex><span>	errorfile	408	/etc/haproxy/errors/408.http
</span></span><span style=display:flex><span>	errorfile	500	/etc/haproxy/errors/500.http
</span></span><span style=display:flex><span>	errorfile	502	/etc/haproxy/errors/502.http
</span></span><span style=display:flex><span>	errorfile	503	/etc/haproxy/errors/503.http
</span></span><span style=display:flex><span>	errorfile	504	/etc/haproxy/errors/504.http
</span></span><span style=display:flex><span>	balance roundrobin	# each server is used in turns, according to assigned weight
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>listen http-in
</span></span><span style=display:flex><span>    bind :80
</span></span><span style=display:flex><span>    monitor-uri   /haproxy  # end point to monitor HAProxy status (returns 200)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    # option httpclose
</span></span><span style=display:flex><span>    server server1 server1.mydomain.com:8080 weight 1 maxconn 2000 check inter 4000
</span></span><span style=display:flex><span>    server server2 server2.mydomain.com:8080 weight 1 maxconn 2000 check inter 4000
</span></span><span style=display:flex><span>    server server3 server3.mydomain.com:8080 weight 1 maxconn 2000 check inter 4000
</span></span><span style=display:flex><span>    rspidel ^Set-cookie:\ IP=	# do not let this cookie tell our internal IP address
</span></span></code></pre></div><p>You also want to setup logging using rsyslog,
you can syslog-ng or other loggers too as well,
but the configuration is different.</p><a href=https://serverbooter.com/post/setup-a-simple-haproxy-config/ class=post-read-more>[Read More]</a></div><div class=blog-tags><a href=https://serverbooter.com//tags/haproxy/>haproxy</a>&nbsp;</div></article></div><ul class="pager main-pager"><li class=previous><a href=https://serverbooter.com/post/page/1/>&larr;</a></li></ul></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:raravena80@gmail.com title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.facebook.com/ title=Facebook><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/raravena80 title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/raravena80 title=Twitter><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-x-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/raravena title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.instagram.com/ title=Instagram><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-instagram fa-stack-1x fa-inverse"></i></span></a></li><li><a href=/post/index.xml title=RSS><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted">Ricardo Aravena
&nbsp;&bull;&nbsp;&copy;
2025</p><p class="credits theme-by text-muted"></p></div></div></div></footer><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js integrity=sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload=renderMathInElement(document.body)></script><script src=https://code.jquery.com/jquery-3.7.0.slim.min.js integrity=sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script><script src=https://serverbooter.com/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://serverbooter.com/js/load-photoswipe.js></script></body></html>
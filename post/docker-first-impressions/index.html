<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Docker First Impressions</title>
  <meta property="og:title" content="Docker First Impressions" />
  <meta name="twitter:title" content="Docker First Impressions" />
  <meta name="description" content="A first impressions take on Docker.">
  <meta property="og:description" content="A first impressions take on Docker.">
  <meta name="twitter:description" content="A first impressions take on Docker.">
  <meta name="author" content="Ricardo Aravena"/>
  <link href='https://blog.serverbooter.com/img/favicon.png' rel='icon' type='image/x-icon'/>
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@raravena80" />
  <meta name="twitter:creator" content="@raravena80" />
  <meta property="og:url" content="https://blog.serverbooter.com/post/docker-first-impressions/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Rico&#39;s Blog" />

  <meta name="generator" content="Hugo 0.58.3" />
  <link rel="canonical" href="https://blog.serverbooter.com/post/docker-first-impressions/" />
  <link rel="alternate" href="https://blog.serverbooter.com/index.xml" type="application/rss+xml" title="Rico&#39;s Blog">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css" integrity="sha384-wITovz90syo1dJWVh32uuETPVEtGigN07tkttEqPv+uR2SE/mbQcG7ATL28aI9H0" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://blog.serverbooter.com/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="https://blog.serverbooter.com/css/syntax.css" /><link rel="stylesheet" href="https://blog.serverbooter.com/css/codeblock.css" />



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

</head>

  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://blog.serverbooter.com">Rico&#39;s Blog</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    <div class="avatar-container">
      <div class="avatar-img-border">
        
      </div>
    </div>

  </div>
</nav>




    
  
  
  




  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              <h1>Docker First Impressions</h1>
                
                
                  <span class="post-meta">
  
  
  <i class="fa fa-calendar-o"></i>&nbsp;Posted on March 7, 2014
  
  
  
</span>


                
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<p>For the last few days I&rsquo;ve been taking at crack at using the recent <a href="https://www.docker.io/">Docker</a> container deployment tool that I&rsquo;ve been
hearing a lot buzz about.
In essence, it&rsquo;s a wrapper on top of Linux <a href="https://linuxcontainers.org/">LXC containers</a>,  writen in the new friendly and not so popular yet <a href="http://golang.org/">Go</a> language developed at Google.</p>

<p>Just a little bit of background, for those of you not familiar with LXC containers,
they are pretty much defined as <code>chroot</code> on steroids. Basically, you can run isolated virtual
environments in a single Linux machine and make it look like that they are different machines.
These environments give you the advantage of being isalated and at the same they are able to use
the same Linux exectutables and memory space to improve speed and footprint size.</p>

<p>Docker is pretty easy to try from its <a href="https://www.docker.io/">website</a>, you can just click on the <a href="https://www.docker.io/gettingstarted/">Get Started</a>
link and a UI terminal shows up where you can type Docker commands. It&rsquo;s CLI feels a lot like a CLI writen in Python or Ruby, yet it still doesn&rsquo;t
have the nice subtleties such as using a <code>?</code> to get help. To get help you simply type <code>docker help</code> or <code>docker command help</code></p>

<p>Setup varies depending on your platform. It can be a bit confusing if you work with multiple say, Linux platforms but from personal experience
most people stick to a more <code>favorite</code> Linux platform. Docker is also available for MacOS and Windows, but in reality
it doesn&rsquo;t run over either one since <code>LXC</code> is only available for Linux. They way they mention that it can be run on MacOS or Windows is by running
it on a lightweght VM.</p>

<p>As of this writing there&rsquo;s a message on each one of the platform installation pages that says: <code>Docker is still under heavy development! We don’t recommend using it in production yet, but we’re getting closer with each release. Please see our blog post, “Getting to Docker 1.0”</code></p>

<p>For me, it wasn&rsquo;t that difficult to setup, I just followed the steps on the Wiki. I don&rsquo;t think the steps
are that difficult but it just requires basic knowledge of the Linux command line.
Docker requires the Linux 3.8 kernel and in my case, I tried Docker on Ubuntu 13.10 so I didn&rsquo;t have to install an extra kernel package.</p>

<p>However, if you are running say Ubuntu 12.04 LTS (Precise) you are going to have to install the update kernel packages and reboot the machine
before you can use Docker:</p>

<pre><code class="language-bash">$ # install the backported kernel from raring
$ sudo apt-get update
$ sudo apt-get install linux-image-generic-lts-raring linux-headers-generic-lts-raring
$ sudo reboot
</code></pre>

<p>In my case, for Ubuntu 13.10 it says that if you want AUFS (AnotherUnionFS) support you need to install the <code>linux-image-extra</code> package:</p>

<pre><code class="language-bash">$ sudo apt-get update
$ sudo apt-get install linux-image-extra-\`uname -r\`
</code></pre>

<p>It turns out that my Ubuntu 13.10 already had the <code>linux-image-extra</code> package, so I didn&rsquo;t have to make any changes.</p>

<p>Next I had to run:</p>

<pre><code class="language-bash">$ sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 36A1D7869245C8950F966E92D8576A8BA88D21E9
$ sudo sh -c &quot;echo deb http://get.docker.io/ubuntu docker main &gt; /etc/apt/sources.list.d/docker.list&quot;
$ sudo apt-get update
$ sudo apt-get install lxc-docker
</code></pre>

<p>But if you prefer,  there&rsquo;s also a curl script that simplifies the previous steps.</p>

<pre><code class="language-bash">$ curl -s https://get.docker.io/ubuntu/ | sudo sh
</code></pre>

<p>All in all pretty easy.  One last thing is that if you have the Ubuntu Firewall enabled (ufw) you need
to allow it to forward traffic in the <code>/etc/default/ufw</code> file:</p>

<pre><code># Change:
# DEFAULT_FORWARD_POLICY=&quot;DROP&quot;
# to
DEFAULT_FORWARD_POLICY=&quot;ACCEPT&quot;
</code></pre>

<p>and then run:</p>

<pre><code class="language-bash">$ sudo ufw allow 4243/tcp
</code></pre>

<p>Now we are all dandy and ready to try Docker commands. The first one that you want to run is
the one to create a container:</p>

<pre><code class="language-bash">$ sudo docker run -i -t ubuntu /bin/bash
</code></pre>

<p>This command will automatically download all the default ubuntu container images that you can use to run your Ubuntu container. It does take a while but then again it&rsquo;s downloading full container images each about 60Mb compressed. Keep in mind that the <code>-i</code> option means &ldquo;interactive&rdquo; and the <code>-t</code> means allocate a pseudo tty.</p>

<p>This the output of the command:</p>

<pre><code class="language-text">Unable to find image 'ubuntu' locally
Pulling repository ubuntu
5ac751e8d623: Download complete
9cd978db300e: Download complete
9cc9ea5ea540: Download complete
9f676bd305a4: Download complete
eb601b8965b8: Download complete
511136ea3c5a: Download complete
f323cf34fd77: Download complete
7a4f87241845: Download complete
1c7f181e78b9: Download complete
6170bb7b0ad1: Download complete
321f7f4200f4: Download complete
</code></pre>

<p>After it&rsquo;s complete, it will display a <code>bash</code> shell in the container with the prompt displaying the container hash id. For example, <code>root@3b667578ce4f:/#</code>. You can run almost any linux command that your Ubuntu distro supports, including something like: <code>apt-get update; apt-get install apache2</code>.</p>

<p>I ran <code>apt-get upgrade</code> and somehow it couldn&rsquo;t finish the installation saying some of the packages were missing dependencies, so in essence I fried the container.</p>

<p>I said no problem, I&rsquo;ll just get rid of it. First hit the <code>ctrl-p ctrl-q</code> keys to detach from the container. Then, run these Docker commands to find out the container id (if you somehow don&rsquo;t remember it), stop the container and then delete the container.</p>

<pre><code class="language-bash">$ docker ps
</code></pre>

<p>then:</p>

<pre><code class="language-bash">$ docker stop 3b667578ce4f
$ docker rm 3b667578ce4f
</code></pre>

<p>and we are back to square one so we can start with a clean sheet. You can notice the all the containers will be stored here: <code>/var/lib/docker/containers</code> in a directory that matches the container&rsquo;s specific hash id. You&rsquo;ll also notice that after you run the <code>docker rm</code> command the directory for the specific container is deleted.</p>

<p>There are other command that are useful. For example:</p>

<pre><code class="language-bash">$ docker images
</code></pre>

<p>will display all the downloaded images that can be used as a container. In my case, it&rsquo;s a list of Ubuntu distros:</p>

<pre><code class="language-bash">root@host:~# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
ubuntu              saucy               9f676bd305a4        4 weeks ago         182.1 MB
ubuntu              13.10               9f676bd305a4        4 weeks ago         182.1 MB
ubuntu              13.04               eb601b8965b8        4 weeks ago         170.2 MB
ubuntu              raring              eb601b8965b8        4 weeks ago         170.2 MB
ubuntu              12.10               5ac751e8d623        4 weeks ago         161.4 MB
ubuntu              quantal             5ac751e8d623        4 weeks ago         161.4 MB
ubuntu              10.04               9cc9ea5ea540        4 weeks ago         183 MB
ubuntu              lucid               9cc9ea5ea540        4 weeks ago         183 MB
ubuntu              12.04               9cd978db300e        4 weeks ago         204.7 MB
ubuntu              latest              9cd978db300e        4 weeks ago         204.7 MB
ubuntu              precise             9cd978db300e        4 weeks ago         204.7 MB
</code></pre>

<p>So now let&rsquo;s say you want to use the <code>quantal</code> image you can run:</p>

<pre><code class="language-bash">$ docker run -t -i ubuntu:5ac751e8d623 /bin/bash
</code></pre>

<p>Although, out of the scope of this specific post, there are many other features that you can use including creating images and publishing them to a public repository.</p>

<h3 id="conclusion">Conclusion</h3>

<p>Docker is a very useful tool for people wanting to deploy application in an isolated way so that it doesn&rsquo;t interfere with the major functions of a particular server. It allows for easy creation an deletion of containers in case something goes wrong or simply when ops guys are trying to deploy something quickly already prebaked into a Docker image. You can even deploy Docker containers in AWS EC2 instances to even further compartamentalize your application.</p>

<p>However, if you are concerned about Docker being in its early development stage (as of this writing) and if you don&rsquo;t care about costs to a certain extent, the Docker/LXC approach is not very different from say using Amazon EC2 prebaked AMIs. LXC containers are pretty light weight but whatever it is that you are running will still be CPU, Disk I/O and Network contrained on the same physical or virtualized machine.</p>

<p>Also, there are also several tools available to create AMIs including the infamous <a href="https://github.com/Netflix/aminator">Aminator</a> developed at Neflix. And if you happen to be a fan of <a href="http://www.ansible.com/home">Ansible</a> like me, you can use the <a href="https://github.com/Answers4AWS/netflixoss-ansible/">Ansible Aminator playbook</a> from <a href="http://answersforaws.com/">AnSwers</a>.</p>

        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://blog.serverbooter.com/post/ansible-playbook-for-papertrail-on-ubuntu/" data-toggle="tooltip" data-placement="top" title="Ansible Playbook for PaperTrail on Ubuntu">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://blog.serverbooter.com/post/lxc-playing/" data-toggle="tooltip" data-placement="top" title="LXC Playing">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
          <div class="disqus-comments">
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "raravena80" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:raravena80@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://www.facebook.com/raravena80" title="Facebook">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/raravena80" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/raravena80" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/raravena" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://stackoverflow.com/users/2989261/rico" title="StackOverflow">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://www.instagram.com/raravena80" title="Instagram">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            
            <a href="https://blog.serverbooter.com/index.xml" title="RSS">
            
              <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Ricardo Aravena
            
          

          &nbsp;&bull;&nbsp;
          2019

          
            &nbsp;&bull;&nbsp;
            <a href="https://blog.serverbooter.com">Rico&#39;s Blog</a>
          
        </p>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js" integrity="sha384-/y1Nn9+QQAipbNQWU65krzJralCnuOasHncUFXGkdwntGeSvQicrYkiUBwsgUqc1" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js" integrity="sha384-dq1/gEHSxPZQ7DdrM82ID4YVol9BYyU7GbWlIwnwyPzotpoc57wDw/guX8EaYGPx" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://blog.serverbooter.com/js/main.js"></script><script> renderMathInElement(document.body); </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script>
<script src="https://blog.serverbooter.com/js/load-photoswipe.js"></script>






  </body>
</html>

